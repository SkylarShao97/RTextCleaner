# language: r
# cache: packages

# r:
#   - release
#   - oldrel

# script:
#   - R CMD build .
#   - R CMD check *tar.gz --as-cran
dist: focal  # æŒ‡å®š Ubuntu ç‰ˆæœ¬ï¼Œé¿å…è‡ªåŠ¨å®‰è£… Google Chrome
language: r
r:
  - release  

cache: packages  

before_install:
  # ğŸš« **å½»åº•åˆ é™¤ Google Chromeï¼Œé˜²æ­¢ Travis-CI ç»§ç»­ä¸‹è½½**
  - sudo rm -f /etc/apt/sources.list.d/google-chrome.list || true
  - sudo rm -f /etc/apt/trusted.gpg.d/google-chrome.gpg || true
  - sudo apt-key del D38B4796 || true
  - sudo apt-get remove --purge google-chrome-stable chromium-browser -y || true
  - sudo apt-get update --allow-releaseinfo-change || true
  # å®‰è£… R ä¾èµ–
  - Rscript -e 'install.packages(c("cpp11", "waldo", "gtable", "purrr"), repos="https://cloud.r-project.org")'

install:
  - Rscript -e 'install.packages("remotes", repos="https://cloud.r-project.org")'
  - Rscript -e 'remotes::install_deps(dependencies = TRUE)'

script:
  - R CMD build .
  - R CMD check *tar.gz --no-manual --as-cran
